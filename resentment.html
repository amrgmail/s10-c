<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1.0, user-scalable=no">
  <title>ุฅุณุชูุงุกุ ๐ก</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      margin: 0 auto;
      padding: 0 1px;
      max-width: 1200px;
      font-family: Arial, sans-serif;
    }

    .small-margin {
      margin-top: 1px;
      margin-bottom: 1px;
    }

    .grid-layout {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      font-size: 60%;
    }

    textarea {
      width: 300px;
      height: 20px;
      font-size: 14px;
    }

    .hidden {
      display: none;
    }

    .dropdown-container {
      position: relative;
      display: inline-block;
    }

    #dropdown-btn {
      padding: 10px;
      background-color: transparent;
      border: 1px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      color: #333;
    }

    #dropdown-list {
      display: none;
      position: absolute;
      top: 40px;
      left: 50px;
      right: 0;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 5px;
      width: 250px;
      max-height: 250px;
      overflow-y: auto;
      z-index: 10;
      font-size: 12px;
    }

    #dropdown-list label {
      display: block;
      padding: 8px;
      cursor: pointer;
    }

    #dropdown-list label:hover {
      background-color: #f0f0f0;
    }

    #selected-effect {
      font-size: 16px;
      margin-left: 10px;
    }

    #selfishness textarea {
      width: 450px;
      height: 10px;
      font-size: 14px;
      margin-bottom: 2px;
    }

    .label-textbox-wrapper button {
      float: right;
      margin-left: 10px;
    }

    .clearfix::after {
      content: "";
      display: table;
      clear: both;
    }

    .show {
      display: block !important;
    }
  </style>
</head>

<body>
  <div>
    <label for="resentment">
      <h1>๐กูุณุชุงุกุ</h1>
    </label>
  </div>

  <div>
    <div class="label-textbox-wrapper">
      <label for="resentment-person" class="small-margin"><strong>๐กููุ</strong></label>
      <textarea id="resentment-person" placeholder="ูุง ุงูุช ูุณุชุงุก ููู" class="small-margin" style="font-size: 16px"></textarea>
      <label for="resentment-reason" class="small-margin"><strong>๐กุงูุณุจุจุ</strong></label>
      <textarea id="resentment-reason" placeholder="ุงุฎุชุตุฑ ุงูุณุจุจ ููุง" class="small-margin" style="font-size: 16px"></textarea>
    </div>

    <div class="label-textbox-wrapper">
      <div class="dropdown-container">
        <button id="dropdown-btn" class="dropdown-btn"><strong>๐ก ุฃุซุฑ ุนููุ</strong></button>
        <div id="dropdown-list" class="dropdown-list">
          <label><input type="checkbox" class="dropdown-option" value="๐ญ ูููุชู" data-target="value-textarea"> ๐ญ ูููุชู: ูุง ุงุฑูุฏ ุงู ุงููู ุนููู</label>
          <label><input type="checkbox" class="dropdown-option" value="๐ ููุธุฑู" data-target="image-textarea"> ๐ ููุธุฑู: ูุง ุงุฑูุฏ ุบูุฑู ุงู ูุฑุงูู ุนููู</label>
          <label><input type="checkbox" class="dropdown-option" value="๐ฐ ูุญูุธุชู" data-target="money-textarea"> ๐ฐ ูุญูุธุชู: ููุชููุงุชู ุงููุงุฏูุฉ</label>
          <label><input type="checkbox" class="dropdown-option" value="๐ ุงูุงูู" data-target="security-textarea"> ๐ ุงูุงูู: ูุง ุฃุทูุฆู ุจูุฌูุฏู ูุงุฏูุง ุงู ุนุงุทููุง</label>
          <label><input type="checkbox" class="dropdown-option" value="๐ ุฎุทุชู" data-target="plan-textarea"> ๐ ุฎุทุชู: ุชุฑุชูุจู ููุฃุญุฏุงุซ</label>
          <label><input type="checkbox" class="dropdown-option" value="๐ฅ ุนูุงูุชู ุงูุดุฎุตูุฉ" data-target="relationship-textarea"> ๐ฅ ุนูุงูุชู ุงูุดุฎุตูุฉ: ูุง ุงุฑูุฏ ุงู ูููู ุบูุฑู ุนููู</label>
          <label><input type="checkbox" class="dropdown-option" value="โค๏ธ ุนูุงูุชู ุงูุฌูุณูุฉ" data-target="sexual-textarea"> โค๏ธ ุนูุงูุชู ุงูุฌูุณูุฉ: ูุง ุงุฑูุฏู ููุฌูุณ</label>
        </div>
      </div>
      <div id="selected-effect" class="selected-effect" style="font-size: 16px; margin-left: 10px;"></div>
    </div>
  </div>

  <button type="button" onclick="toggleVisibility('dynamic-content')" style="text-align: center; color: goldenrod; margin-bottom: 1px; border: none; background: none; cursor: pointer; font-size: 16px;">ุนูุฏูุง ุชุธูุฑ ูุฐูุ ุฃุณุฃูู ูุง ุงููู ูู ุงูุญุงู ุฃู ุชุฒูููุง. ๐๐</button>
  <p class="content hidden" id="dynamic-content" style="font-size: 0.9rem; margin-top: 3px; margin-right: 10px; text-align: center;">
    "ุฃุณุฃูู ูุง ุงููู ุฃู ุชุณุงุนุฏูู ุนูู ุฃู ุฃุธูุฑ ู ๐ก ููุณ ุงูุชูุจูุ ุงูุดููุฉ ู ุงูุตุจุฑ ุงูุฐู ููุช ุณุฃููุญู ุจุณุฑูุฑ ูุตุฏูู ูุฑูุถ".
  </p>

  <label style="text-align: right; color: Blue; margin-bottom: 1px; border: none; background: none; cursor: pointer; font-size: 19px;">๐ุงูู ููุช ุงูุงูู - ูุชุนูู ุจุ</label>
  <div id="selfishness">
    <textarea id="value-textarea" class="hidden" style="font-size: 16px;" placeholder="๐ญ ูููุชู: ูุง ุฃุฑูุฏ ุฃู ุฃููู ุนููู"></textarea>
    <textarea id="image-textarea" class="hidden" style="font-size: 16px;" placeholder="๐ ููุธุฑู: ูุง ุฃุฑูุฏ ุบูุฑู ุฃู ูุฑุงูู ุนููู"></textarea>
    <textarea id="money-textarea" class="hidden" style="font-size: 16px;" placeholder="๐ฐ ูุญูุธุชู: ููุชููุงุชู ุงููุงุฏูุฉ"></textarea>
    <textarea id="security-textarea" class="hidden" style="font-size: 16px;" placeholder="๐ ุฃูุงูู: ูุง ุฃุทูุฆู ุจูุฌูุฏู ูุงุฏููุง ุฃู ุนุงุทูููุง"></textarea>
    <textarea id="plan-textarea" class="hidden" style="font-size: 16px;" placeholder="๐ ุฎุทุชู: ุชุฑุชูุจู ููุฃุญุฏุงุซ"></textarea>
    <textarea id="relationship-textarea" class="hidden" style="font-size: 16px;" placeholder="๐ฅ ุนูุงูุชู ุงูุดุฎุตูุฉ: ูุง ุฃุฑูุฏ ุฃู ูููู ุบูุฑู ุนููู"></textarea>
    <textarea id="sexual-textarea" class="hidden" style="font-size: 16px;" placeholder="โค๏ธ ุนูุงูุชู ุงูุฌูุณูุฉ: ูุง ุฃุฑูุฏู ููุฌูุณ"></textarea>
  </div>

  <button type="button" onclick="toggleVisibility('lying-field')" style="text-align: right; color: Blue; margin-bottom: 1px; border: none; background: none; cursor: pointer; font-size: 16px;">๐คฅููู ุฌุนููู ุฐูู ุงูุฐุจุ</button>
  <div id="lying-field" class="hidden">
    <textarea placeholder="ุชุจุฑูุฑู ูุฃูุงููุชู" style="width: 450px; height: 10px; font-size: 16px; margin-bottom: 0px"></textarea>
  </div>

  <button type="button" onclick="toggleVisibility('self-section')" style="text-align: right; color: Blue; margin-top: 1px; border: none; background: none; cursor: pointer; font-size: 16px;">๐ูู ุฌุนููู ุฐูู ุงุณุนู ูุฑุงุก ุงูุฃูุงุ</button>
  <div id="self-section" class="hidden">
    <div class="label-textbox-wrapper">
      <textarea id="ego-fields-text" placeholder="ูุฑุงุฑุงู ูุนู" style="width: 200px; margin-right: 10px; font-size: 16px"></textarea>
      <p style="margin-right: 5px; font-size: 10px; width: 50px">๐๏ธู ุฃููู ุจุงูุฅุตูุงุญุงุช ุณุฑูุนุงู ุฅุฐุง ููุช ุขุฐูุช ุฃุญุฏ ูุง</p>
      <textarea placeholder="ุงุฒุงู ุชุตูุญ ุฏูุ" style="margin-left: 8px; width: 160px; font-size: 12px; margin-right: 0px"></textarea>
    </div>
  </div>

  <button type="button" onclick="toggleVisibility('dynamic-content2')" style="text-align: center; color: goldenrod; margin-bottom: 1px; border: none; background: none; cursor: pointer; font-size: 16px;">ุนูุฏูุง ุชุธูุฑ ูุฐูุ ุฃุณุฃูู ูุง ุงููู ูู ุงูุญุงู ุฃู ุชุฒูููุง. ๐๐</button>
  <p class="content hidden" id="dynamic-content2" style="font-size: 0.9rem; margin-top: 3px; margin-right: 10px; text-align: center;">
    "ุฎุงูููุ ุฃูุง ุงูุขู ูุฏู ุงูุนุฒู ุนูู ุฃูู ูุฌุจ ุฃู ุชูุชูููู ููููููุ ุงูุตุงูุญ ู ุงูุณูุก
    <em style="font-size: smaller;">(ุชุฎูู ุนู ูู ูุง ูุชุจุช ุงูู ูุชุนูู ุจูู ูู ุงูุฃูุงููุฉ ููููู ููุง ูุฑูุฏ ุงููู ุญุชู ูู ุนูุณ ูุง ุชุฑูุฏ)</em>.
    ุฃุฏุนู ุฃูู ุงูุขู ุชุฒูู ููู ูู ุนูุจ ุดุฎุตู ๐๐คฅ๐ ููู ูู ุทุฑูู ููุนู ูู ู ูุฑูุงูู. ุงููุญูู ุงูููุฉุ ุนูุฏูุง ุฃุฎุฑุฌ ูู ููุงุ ููููุงู ุจูุง ุชุฃูุฑูู ุจู. ุขููู."
  </p>

  <button type="button" onclick="toggleVisibility('fear-section')" style="text-align: right; color: Blue; margin-top: 1px; border: none; background: none; cursor: pointer; font-size: 16px;">๐ฐูู ุฌุนููู ุฐูู ุฃุฎุงูุ</button>
  <div id="fear-section" class="hidden">
    <textarea id="fear-input" placeholder="ุงูู ุงููู ุงูุช ูููุงู ูููุ" style="width: 450px; height: 10px; font-size: 16px; margin-bottom: 0px"></textarea>
    <p class="subtitle" style="text-align: center; color: goldenrod; margin-top: 0px; margin-bottom: 0px; border: none; background: none; cursor: pointer; font-size: 16px;"> ุนูุฏูุง ุชุธูุฑ ูุฐูุ ุฃุณุฃูู ูุง ุงููู ูู ุงูุญุงู ุฃู ุชุฒูููุง. ๐๐ </p>
    <p style="font-size: 0.9rem; margin-top: 0px">ุฃุณุฃูู ูุง ุฑุจ ุฃู ุชุฒูู ุฎููู ูู๐ฐู ุฃู ุชูุฌู ุงูุชุจุงูู ุฅูู ูุง ุณุชุฑูุฏูู ุฃู ุฃูููู.</p>
  </div>

  <div>
    <button onclick="collectAndRedirectToShare(event)" style="width: 80px; height: 50px; background-color: green; color: white; font-size: 1rem; border: none; border-radius: 5px; text-align: center;">ุงูุชุงููโญ๏ธ</button>
    <button onclick="collectAndRedirectToIndex(event)" style="width: 150px; height: 50px; background-color: green; color: white; font-size: 1rem; border: none; border-radius: 5px; text-align: center;">ุฌุฑุฏ ูููู ุชุงูู๐</button>
  </div>

  <script>
    function toggleVisibility(elementId) {
      const element = document.getElementById(elementId);
      if (element) {
        element.classList.toggle('hidden');
      }
    }

    // Toggle dropdown visibility
    document.getElementById('dropdown-btn').addEventListener('click', function() {
      const dropdown = document.getElementById('dropdown-list');
      dropdown.classList.toggle('show');
    });

    // Event delegation for checkboxes
    document.getElementById('dropdown-list').addEventListener('change', function(event) {
      if (event.target.classList.contains('dropdown-option')) {
        const option = event.target;
        const targetTextareaId = option.getAttribute('data-target');
        const textarea = document.getElementById(targetTextareaId);
        if (option.checked) {
          textarea.classList.remove('hidden');
        } else {
          textarea.classList.add('hidden');
        }

        const selectedOptions = Array.from(document.querySelectorAll('.dropdown-option:checked'))
          .map(option => option.value)
          .join(', ');

        document.getElementById('selected-effect').textContent = selectedOptions;
      }
    });

    // Collect and Redirect function
    function collectAndRedirectToShare(event) {
      event.preventDefault();

      console.log('collectAndRedirectToShare button clicked');  // Debug log

      const resentmentPerson = document.getElementById('resentment-person').value || '';
      const resentmentReason = document.getElementById('resentment-reason').value || '';
      const selectedEffects = Array.from(document.querySelectorAll('.dropdown-option:checked'))
        .map(option => option.nextElementSibling.textContent.trim())
        .join(', ');

      const selfishnessText = collectTextForTextareas(['value-textarea', 'image-textarea', 'money-textarea', 'security-textarea', 'plan-textarea', 'relationship-textarea', 'sexual-textarea']);
      const lyingText = document.querySelector('#lying-field textarea') ? document.querySelector('#lying-field textarea').value : '';
      const egoText = document.querySelector('#self-section textarea') ? document.querySelector('#self-section textarea').value : '';
      const fearText = document.getElementById('fear-input') ? document.getElementById('fear-input').value : '';

      const sharedText = `๐ก ูุณุชุงุก ูู: ${resentmentPerson}. ๐ก ุงูุณุจุจ: ${resentmentReason}. ๐ก ุฃุซุฑ ุนูู: ${selectedEffects}. ${selfishnessText} ๐คฅูุฐุจุ: ${lyingText} ๐ ุณุนู ูุฑุงุก ุงูุฃูุงุ: ${egoText} ู ุฃููู ุจุงูุฅุตูุงุญุงุช ุณุฑูุนุงู ุฅุฐุง ููุช ุขุฐูุช ุฃุญุฏ ูุง ๐๏ธโค๏ธโ๐ฉน: ${egoText} ๐ฑ ุฎููุ: ${fearText}`;
      window.localStorage.setItem('sharedText', sharedText);
      window.location.href = '/Share.html';
    }

    function collectAndRedirectToIndex(event) {
      event.preventDefault();

      console.log('collectAndRedirectToIndex button clicked');  // Debug log
      // Handle similar functionality to collectAndRedirectToShare...
    }

    function collectTextForTextareas(ids) {
      return ids
        .map(id => {
          const textarea = document.getElementById(id);
          return textarea && textarea.value ? `ุฃูุงูู ูุฃูู ูุชุนูู ุจู ${textarea.placeholder}: ${textarea.value}` : '';
        })
        .filter(text => text.length > 0)
        .join('; ');
    }
  </script>
</body>

</html>
